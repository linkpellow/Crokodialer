<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crokodial Dialer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* Complete embedded CSS for Crokodialer Dialer */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* CSS Custom Properties for Theme Synchronization */
    :root {
      --background-color: #000000;
      --text-color: #ffffff;
      --border-color: #dee2e6;
      --accent-color: #007bff;
      --primary-color: #007bff;
    }

    /* Theme will be applied via JavaScript - no hardcoded values here */



    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
      background: var(--background-color); /* Theme-synchronized background */
      color: var(--text-color);
      height: 100vh;
      overflow: hidden;
      user-select: none;
      position: relative;
      transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
    }

    /* Enhanced iPhone-like glossy glass effect */
    body::before {
      content: '';
      position: absolute;
      top: 20px;
      left: 20px;
      right: 20px;
      bottom: 20px;
      background: linear-gradient(145deg, 
        var(--background-color) 0%, 
        var(--background-color) 30%, 
        var(--background-color) 60%, 
        var(--background-color) 100%);
      border-radius: 35px;
      border: 1px solid var(--accent-color);
      box-shadow: 
        0 0 0 1px var(--accent-color),
        inset 0 3px 0 var(--accent-color),
        inset 0 -3px 0 var(--primary-color),
        0 30px 60px rgba(0, 0, 0, 0.5),
        0 0 0 1px var(--accent-color),
        0 0 30px var(--accent-color),
        0 0 60px var(--primary-color);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      z-index: 1;
      pointer-events: none;
    }

    /* iPhone notch effect */
    body::after {
      content: '';
      position: absolute;
      top: 25px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 25px;
      background: linear-gradient(180deg, 
        var(--primary-color) 0%, 
        var(--accent-color) 50%, 
        var(--background-color) 100%);
      border-radius: 0 0 15px 15px;
      z-index: 2;
      pointer-events: none;
    }

    /* Enhanced Screens with better glass effect */
    .screen {
      display: none;
      height: calc(100vh - 20px);
      width: calc(100% - 20px);
      margin: 10px;
      position: relative;
      z-index: 3;
      border-radius: 30px;
      overflow: hidden;
      background: #000000 !important; /* Force black background for inner screen */
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid var(--accent-color);
      box-shadow: 
        0 0 0 1px var(--accent-color),
        inset 0 2px 0 var(--accent-color),
        inset 0 -2px 0 var(--primary-color),
        0 20px 40px rgba(0, 0, 0, 0.3),
        0 0 0 1px var(--accent-color);
    }

    .screen.active {
      display: flex;
      flex-direction: column;
    }

    /* Login Screen */
    #loginScreen {
      justify-content: center;
      align-items: center;
      background: #000000 !important; /* Force black background */
    }

    .login-container {
      width: 90%;
      max-width: 320px;
    }

    .app-title {
      font-size: 36px;
      font-weight: 300;
      text-align: center;
      margin-bottom: 40px;
      color: #4CAF50;
    }

    #loginForm {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    #loginForm input {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      padding: 15px;
      font-size: 16px;
      color: #ffffff;
      transition: all 0.3s ease;
    }

    #loginForm input::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    #loginForm input:focus {
      outline: none;
      border-color: #4CAF50;
      background: rgba(255, 255, 255, 0.15);
    }

    .primary-btn {
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 15px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .primary-btn:hover {
      background: #45a049;
      transform: translateY(-1px);
    }

    .primary-btn:active {
      transform: translateY(0);
    }

    .error-message {
      color: #f44336;
      text-align: center;
      margin-top: 15px;
      font-size: 14px;
    }

    /* Status Bar */
    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      background: rgba(26, 26, 26, 0.9);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-size: 10px;
      font-weight: 600;
      color: #ffffff;
      height: 35px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .status-left {
      display: flex;
      align-items: center;
      padding-top: 0;
    }

    .status-right {
      display: flex;
      align-items: center;
      padding-top: 0;
    }

    .status-logout-btn {
      background: none;
      border: none;
      color: #ffc400;
      font-size: 14px;
      font-weight: 400;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 4px;
      transition: background-color 0.2s;
      line-height: 1;
      display: flex;
      align-items: center;
    }

    .status-logout-btn:hover {
      background: rgba(0, 122, 255, 0.1);
    }

    .status-settings-btn {
      background: none;
      border: none;
      color: #8E8E93;
      font-size: 14px;
      font-weight: 400;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 4px;
      transition: background-color 0.2s;
      line-height: 1;
      display: flex;
      align-items: center;
      margin-right: 8px;
    }

    .status-settings-btn:hover {
      background: rgba(142, 142, 147, 0.1);
      color: #ffffff;
    }

    .status-settings-btn svg {
      stroke: currentColor;
    }

    /* Settings Modal */
    .settings-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .settings-modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .settings-content {
      background: #1a1a1a;
      border-radius: 20px;
      padding: 30px;
      width: 90%;
      max-width: 400px;
      border: 1px solid #333;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    }

    .settings-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      border-bottom: 1px solid #333;
      padding-bottom: 15px;
    }

    .settings-header h3 {
      color: #ffffff;
      font-size: 24px;
      font-weight: 600;
      margin: 0;
    }

    .close-btn {
      background: none;
      border: none;
      color: #8E8E93;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      color: #ffffff;
    }

    .settings-section {
      margin-bottom: 25px;
    }

    .settings-section h4 {
      color: #ffffff;
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 15px 0;
    }

    .compact-theme {
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid #333;
    }

    .compact-color-controls {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .color-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .color-row label {
      color: #ffffff;
      font-size: 14px;
      font-weight: 500;
      min-width: 70px;
    }

    .color-picker {
      width: 40px;
      height: 40px;
      border: 2px solid #333;
      border-radius: 8px;
      cursor: pointer;
      background: none;
      display: block;
      visibility: visible;
      opacity: 1;
    }

    .color-picker::-webkit-color-swatch-wrapper {
      padding: 0;
      border: none;
    }

    .color-picker::-webkit-color-swatch {
      border: 2px solid #333;
      border-radius: 8px;
      width: 100%;
      height: 100%;
    }
    
    /* Ensure color pickers are always visible */
    .color-picker,
    .color-picker:hover,
    .color-picker:focus,
    .color-picker:active {
      opacity: 1 !important;
      visibility: visible !important;
      display: block !important;
    }

    .color-control {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .color-swatch {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      border: 2px solid #333;
      cursor: pointer;
      transition: all 0.2s;
    }

    .color-swatch:hover {
      transform: scale(1.05);
      border-color: #007AFF;
    }

    .color-input {
      flex: 1;
      background: #2d2d2d;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 12px 16px;
      color: #ffffff;
      font-size: 16px;
      font-family: 'Source Code Pro', monospace;
      outline: none;
      transition: all 0.2s;
    }

    .color-input:focus {
      border-color: #007AFF;
      box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
    }

    .color-input::placeholder {
      color: #8E8E93;
    }

    .settings-actions {
      display: flex;
      gap: 15px;
      margin-top: 30px;
    }

    .apply-btn, .reset-btn {
      flex: 1;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .apply-btn {
      background: #007AFF;
      color: white;
    }

    .apply-btn:hover {
      background: #0056CC;
      transform: translateY(-1px);
    }

    .reset-btn {
      background: #333;
      color: #ffffff;
    }

    .reset-btn:hover {
      background: #444;
      transform: translateY(-1px);
    }

    .placeholder-text {
      color: #8E8E93;
      font-size: 14px;
      font-style: italic;
      margin: 0;
      padding: 10px 0;
    }

    /* Tab Content */
    .tab-content {
      display: none;
      flex: 1;
      flex-direction: column;
      overflow: hidden;
    }

    .tab-content.active {
      display: flex;
    }

    /* Keypad Tab */
    #keypadTab {
      justify-content: center;
      align-items: center;
      padding: 0 0 10px 0;
      flex: 1;
    }

    /* Time Display */
    .time-text {
      font-size: 12px;
      font-weight: 500;
      color: #ffffff;
      letter-spacing: 0;
      line-height: 1;
      display: flex;
      align-items: center;
    }

    /* Power Dialer Toggle */
    .power-dialer-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 0;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #333;
      transition: 0.3s;
      border-radius: 20px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 2px;
      bottom: 2px;
      background-color: #666;
      transition: 0.3s;
      border-radius: 50%;
    }

    .toggle-switch input:checked + .toggle-slider {
      background-color: #34C759;
    }

    .toggle-switch input:checked + .toggle-slider:before {
      transform: translateX(20px);
      background-color: white;
    }

    .toggle-label {
      font-size: 10px;
      color: #8E8E93;
      font-weight: 400;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .power-dialer-icon {
      color: #8E8E93;
      transition: color 0.3s ease;
    }

    .lightning-bolt-icon {
      color: #FF9500;
      opacity: 0;
      transition: opacity 0.3s ease;
      transform: scale(0.8);
    }

    /* When power dialer is enabled */
    .toggle-switch input:checked ~ .toggle-label .power-dialer-icon {
      color: #34C759;
    }

    .toggle-switch input:checked ~ .toggle-label .lightning-bolt-icon {
      opacity: 1;
      transform: scale(1);
      animation: lightning-pulse 2s infinite;
    }

    @keyframes lightning-pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.1); }
    }

    /* Phone Display */
    .phone-display {
      padding: 10px 20px;
      background: #000000; /* Solid black background */
      text-align: center;
      width: 100%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      transition: background-color 0.2s ease;
      border-radius: 8px;
      margin: 5px;
      cursor: grab;
    }

    .phone-display:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .phone-display:active {
      background: rgba(255, 255, 255, 0.1);
      cursor: grabbing;
    }

    .lead-name-display {
      font-size: 20px;
      font-weight: 500;
      color: #4CAF50;
      text-align: center;
      min-height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px 0;
    }

    #phoneDisplay {
      width: 100%;
      padding: 12px 15px;
      font-size: 22px;
      font-weight: 600;
      text-align: center;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      color: #ffffff;
      outline: none;
      transition: all 0.3s ease;
      font-family: 'Source Code Pro', monospace;
      min-height: 50px;
    }

    #phoneDisplay:focus {
      border-color: #4CAF50;
      background: rgba(255, 255, 255, 0.15);
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
    }

    #phoneDisplay::placeholder {
      color: rgba(255, 255, 255, 0.5);
      font-weight: 400;
      font-family: 'Source Code Pro', monospace;
      font-size: 15px;
      letter-spacing: 0.3px;
    }

    #phoneDisplay:invalid {
      border-color: #f44336;
      box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.3);
    }

    /* Dial Pad - Minimalistic iPhone style */
    .dial-pad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      padding: 15px;
      background: #000000; /* Solid black background */
      justify-items: center;
      align-items: center;
      max-width: 400px;
      margin: 0 auto;
    }

    .dial-btn {
      background: rgba(255, 255, 255, 0.1); /* Subtle transparent background */
      border: none;
      border-radius: 50%;
      width: 80px;
      height: 80px;
      font-size: 32px;
      font-weight: 300;
      color: #ffffff;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: none; /* Remove shadows for minimalistic look */
    }

    .dial-btn span {
      font-size: 12px;
      font-weight: 400;
      color: #8E8E93;
      margin-top: 2px;
    }

    .dial-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
    }

    .dial-btn:active {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(0.95);
    }

    /* Backspace Button */
    .backspace-btn {
      background: rgba(255, 59, 48, 0.2) !important; /* Red tint for backspace */
      border: 1px solid rgba(255, 59, 48, 0.3);
    }

    .backspace-btn:hover {
      background: rgba(255, 59, 48, 0.3) !important;
    }

    .backspace-btn:active {
      background: rgba(255, 59, 48, 0.4) !important;
    }

    .backspace-btn svg {
      stroke: #FF3B30;
    }

    /* Call Button Container */
    .call-button-container {
      display: flex;
      justify-content: center;
      padding: 10px;
      background: #000000; /* Solid black background */
      width: 100%;
    }

    .call-btn {
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 50%;
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      position: relative;
      z-index: 15;
      overflow: visible !important;
    }

    .call-btn:hover {
      background: #45a049;
      transform: scale(1.05);
    }

    .call-btn:active {
      transform: scale(0.95);
    }

    /* End Call button state - red styling */
    .end-call {
      background: #f44336 !important;
      color: white;
      border: none;
      border-radius: 50%;
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .end-call:hover {
      background: #d32f2f !important;
      transform: scale(1.05);
    }

    .end-call:active {
      transform: scale(0.95);
    }

    /* Hangup Button Container */
    .hangup-button-container {
      display: flex;
      justify-content: center;
      padding: 10px;
      background: #000000; /* Solid black background */
      width: 100%;
    }

    .hangup-btn {
      background: #FF3B30;
      border: none;
      border-radius: 50%;
      width: 80px;
      height: 80px;
      color: white;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(255, 59, 48, 0.3);
    }

    .hangup-btn:hover {
      background: #FF453A;
      transform: scale(1.05);
    }

    .hangup-btn:active {
      transform: scale(0.95);
    }

    /* Status Bar */
    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center; /* changed from flex-start to center for perfect vertical alignment */
      padding: 8px 20px;
      background: #000000; /* Solid black background */
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-size: 10px;
      font-weight: 600;
      color: #ffffff;
      height: 60px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .status-left,
    .status-right {
      display: flex;
      align-items: center; /* vertical alignment for all inner items */
      gap: 12px; /* add spacing between time and toggle */
    }

    /* Toggle Switch - make it more compact */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
      margin: 0; /* remove any margin that could push it down */
      vertical-align: middle;
    }

    /* Lightning bolt icon – ensure it's close to the toggle */
    .lightning-bolt-icon {
      color: #FF9500;
      opacity: 0;
      transition: opacity 0.3s ease;
      transform: scale(0.8);
      margin-left: 4px;
      margin-right: 0;
      vertical-align: middle;
    }

    /* When power dialer is enabled */
    .toggle-switch input:checked ~ .lightning-bolt-icon {
      opacity: 1;
      transform: scale(1);
      animation: lightning-pulse 2s infinite;
    }

    /* Call Status */
    .call-status {
      text-align: center;
      padding: 2px 20px;
      font-size: 12px;
      color: #8E8E93;
      background: #000000; /* Solid black background */
      transition: all 0.3s ease;
      font-weight: 500;
      min-height: 15px;
    }

    .call-status.idle {
      color: #8E8E93;
    }

    .call-status.calling {
      color: #007AFF;
      font-weight: 600;
      animation: pulse 2s infinite;
    }

    .call-status.ringing {
      color: #FF9500;
      font-weight: 600;
      animation: pulse 1s infinite;
    }

    .call-status.connected {
      color: #34C759;
      font-weight: 600;
    }

    .call-status.on-hold {
      color: #FF9500;
      font-weight: 600;
      animation: pulse 2s infinite;
    }

    .call-status.disconnecting {
      color: #FF3B30;
      font-weight: 600;
    }

    .call-status.disconnected {
      color: #8E8E93;
      font-weight: 500;
    }

    .call-status.error {
      color: #FF3B30;
      font-weight: 600;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }

    @keyframes lightning-pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.1); }
    }

    /* Contacts Tab */
    .contacts-search {
      display: flex;
      gap: 10px;
      padding: 15px 20px;
      background: #000000; /* Solid black background */
      border-bottom: 1px solid #333333;
    }

    .search-input {
      flex: 1;
      background: #2d2d2d;
      border: 1px solid #333333;
      border-radius: 10px;
      padding: 12px 16px;
      color: #ffffff;
      font-size: 17px;
      outline: none;
      transition: all 0.2s ease;
    }

    .search-input:focus {
      border-color: #007AFF;
      box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
    }

    .search-input::placeholder {
      color: #8E8E93;
    }

    .refresh-btn {
      background: #2d2d2d;
      border: 1px solid #333333;
      border-radius: 10px;
      padding: 12px;
      color: #007AFF;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .refresh-btn:hover {
      background: #3d3d3d;
      border-color: #007AFF;
    }

    .contacts-list {
      flex: 1;
      overflow-y: auto;
      background: #000000; /* Solid black background */
    }

    .contact-item {
      display: flex;
      flex-direction: column;
      padding: 15px 20px;
      border-bottom: 1px solid #333333;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .contact-item:hover {
      background: #2d2d2d;
    }

    .contact-item.selected {
      background: rgba(0, 122, 255, 0.1);
    }

    .contact-name {
      font-size: 17px;
      font-weight: 600;
      color: #ffffff;
      margin-bottom: 4px;
    }

    .contact-phone {
      font-size: 15px;
      color: #007AFF;
      margin-bottom: 4px;
    }

    .contact-status {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .status-badge {
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .status-badge.new { background: #FF9500; color: #000; }
    .status-badge.contacted { background: #007AFF; color: white; }
    .status-badge.qualified { background: #34C759; color: white; }
    .status-badge.converted { background: #5856D6; color: white; }
    .status-badge.lost { background: #FF3B30; color: white; }

    .contacts-footer {
      padding: 15px 20px;
      background: #000000; /* Solid black background */
      border-top: 1px solid #333333;
      text-align: center;
    }

    .lead-count {
      font-size: 12px;
      color: #8E8E93;
      padding: 8px 12px;
      background: #2d2d2d;
      border-radius: 8px;
      border: 1px solid #333333;
      white-space: nowrap;
    }

    /* Placeholder Content */
    .placeholder-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 40px 20px;
      color: #8E8E93;
      background: #000000; /* Solid black background */
    }

    .placeholder-content h3 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 10px;
      color: #ffffff;
    }

    .placeholder-content p {
      font-size: 17px;
      line-height: 1.4;
    }

    /* Bottom Navigation - Hidden by default */
    .bottom-nav {
      position: fixed;
      bottom: -83px;
      left: 0;
      right: 0;
      display: flex;
      background: rgba(0, 0, 0, 0.9); /* Dark background */
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding: 8px 0;
      height: 83px;
      transition: bottom 0.3s ease-in-out;
      z-index: 1000;
    }

    /* Hover area at bottom of screen */
    .bottom-hover-area {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: transparent;
      z-index: 998;
    }

    /* Ensure call status is visible above hover area */
    #keypadTab {
      padding-bottom: 40px;
    }

    /* Show navigation only when hovering in bottom area */
    .bottom-hover-area:hover .bottom-nav {
      bottom: 0;
    }

    .nav-tab {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
      padding: 8px 4px;
    }

    .nav-tab:hover {
      background: #3d3d3d;
    }

    .nav-tab.active {
      color: #007AFF;
    }

    .nav-tab:not(.active) {
      color: #8E8E93;
    }

    .nav-icon {
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-icon svg {
      stroke: currentColor;
    }

    .nav-label {
      font-size: 10px;
      font-weight: 500;
      text-align: center;
    }

    .nav-badge {
      position: absolute;
      top: 8px;
      right: 50%;
      transform: translateX(50%);
      background: #FF3B30;
      color: white;
      font-size: 10px;
      font-weight: 600;
      padding: 2px 6px;
      border-radius: 10px;
      min-width: 18px;
      text-align: center;
    }

    /* Inner Screen Container - Always Black */
    .inner-screen-container {
      background: #000000 !important;
      border: none !important;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      overflow: visible;
    }

    /* Individual Inner Screen Sections - Always Black */
    .call-status-section,
    .lead-info-section,
    .dial-pad-section,
    .call-controls-section {
      background: #000000 !important;
      border: none !important;
      width: 100%;
    }

    /* Ensure call controls section doesn't clip the call button */
    .call-controls-section {
      overflow: visible !important;
      position: relative;
      z-index: 5;
    }

    /* Make call status section more compact */
    .call-status-section {
      padding: 0;
      margin: 0;
      min-height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Override any theme custom properties for inner elements */
    .inner-screen-container *,
    .call-status-section *,
    .lead-info-section *,
    .dial-pad-section *,
    .call-controls-section * {
      --background-color: #000000 !important;
      --text-color: #ffffff !important;
    }

    /* Additional strong overrides for any remaining theme bleeding */
    .inner-screen-container,
    .inner-screen-container *,
    .call-status-section,
    .call-status-section *,
    .lead-info-section,
    .lead-info-section *,
    .dial-pad-section,
    .dial-pad-section *,
    .call-controls-section,
    .call-controls-section * {
      background: #000000 !important;
      border-color: transparent !important;
      box-shadow: none !important;
    }

    /* Ensure no theme colors bleed into inner screen */
    .inner-screen-container {
      background: #000000 !important;
      border: none !important;
      box-shadow: none !important;
    }

    /* Ensure phone display stays black */
    .phone-display {
      background: #000000 !important;
      border: none !important;
    }

    /* Ensure dial pad stays black */
    .dial-pad {
      background: #000000 !important;
      border: none !important;
    }

    /* Ensure call button container stays black */
    .call-button-container {
      background: #000000 !important;
      border: none !important;
      overflow: visible !important;
      position: relative;
      z-index: 10;
    }

    /* Ensure hangup button container stays black */
    .hangup-button-container {
      background: #000000 !important;
      border: none !important;
    }

    /* Ensure call status stays black */
    .call-status {
      background: #000000 !important;
      border: none !important;
    }

    /* Ensure status bar stays black */
    .status-bar {
      background: #000000 !important;
      border: none !important;
    }

    /* Ensure screen element doesn't use theme colors for background */
    .screen {
      background: #000000 !important;
    }

    /* Ensure main screen doesn't use theme colors */
    #mainScreen {
      background: #000000 !important;
    }

    /* Responsive Design */
    @media (max-width: 400px) {
      .contacts-search {
        flex-direction: column;
        gap: 8px;
      }
      
      .search-input,
      .refresh-btn {
        width: 100%;
      }
      
      .dial-pad {
        gap: 15px;
        padding: 15px;
      }
      
      .dial-btn {
        width: 70px;
        height: 70px;
        font-size: 28px;
      }
      
      .call-btn, .hangup-btn {
        width: 70px;
        height: 70px;
      }
      
      .time-text {
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
  <!-- Login Screen -->
  <div id="loginScreen" class="screen active">
    <div class="login-container">
      <h1 class="app-title">Crokodial</h1>
      <form id="loginForm">
        <input type="email" id="email" placeholder="Email" required>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit" class="primary-btn">Login</button>
      </form>
      <div id="loginError" class="error-message"></div>
    </div>
  </div>

  <!-- Main App Screen - Dark iPhone Style -->
  <div id="mainScreen" class="screen">
    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-left">
        <div id="timeDisplay" class="time-text">11:07 EST</div>
        <div class="power-dialer-toggle">
          <label class="toggle-switch">
            <input type="checkbox" id="powerDialerToggle">
            <span class="toggle-slider"></span>
          </label>
          <span class="toggle-label">
            <svg class="power-dialer-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
            <svg class="lightning-bolt-icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
          </span>
        </div>
      </div>
      <div class="status-right">
        <button id="settingsBtn" class="status-settings-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
          </svg>
        </button>
        <button id="logoutBtn" class="status-logout-btn">Logout</button>
      </div>
    </div>

    <!-- Keypad Tab Content -->
    <div id="keypadTab" class="tab-content active">
      <!-- Inner Screen Container - Always Black -->
      <div class="inner-screen-container">
        <!-- A. Call Status Section -->
        <div class="call-status-section">
          <div id="callStatus" class="call-status">Ready</div>
        </div>

        <!-- B. Lead Info Section -->
        <div class="lead-info-section">
          <div class="phone-display">
            <div id="leadNameDisplay" class="lead-name-display"></div>
            <input type="text" id="phoneDisplay" placeholder="Enter number" autocomplete="off">
          </div>
        </div>

        <!-- C. Dial Pad Section -->
        <div class="dial-pad-section">
          <div class="dial-pad">
            <button class="dial-btn" data-digit="1">1</button>
            <button class="dial-btn" data-digit="2">2<span>ABC</span></button>
            <button class="dial-btn" data-digit="3">3<span>DEF</span></button>
            <button class="dial-btn" data-digit="4">4<span>GHI</span></button>
            <button class="dial-btn" data-digit="5">5<span>JKL</span></button>
            <button class="dial-btn" data-digit="6">6<span>MNO</span></button>
            <button class="dial-btn" data-digit="7">7<span>PQRS</span></button>
            <button class="dial-btn" data-digit="8">8<span>TUV</span></button>
            <button class="dial-btn" data-digit="9">9<span>WXYZ</span></button>
            <button class="dial-btn backspace-btn" id="backspaceBtn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path>
                <polyline points="10,9 15,14 10,19"></polyline>
              </svg>
            </button>
            <button class="dial-btn" data-digit="0">0<span>+</span></button>
            <button class="dial-btn" data-digit="#">#</button>
          </div>
        </div>

        <!-- D. Call Controls Section -->
        <div class="call-controls-section">
          <!-- Call Button -->
          <div class="call-button-container">
            <button id="callBtn" class="call-btn">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
            </button>
          </div>

          <!-- Hang Up Button (hidden by default) -->
          <div class="hangup-button-container" style="display: none;">
            <button id="hangupBtn" class="hangup-btn" style="display: none;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path>
                <line x1="23" y1="1" x2="1" y2="23"></line>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Contacts Tab Content -->
    <div id="contactsTab" class="tab-content">
      <!-- Search Bar -->
      <div class="contacts-search">
        <input type="text" id="contactsSearch" placeholder="Search leads..." class="search-input">
        <button id="refreshLeadsBtn" class="refresh-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M23 4v6h-6"></path>
            <path d="M1 20v-6h6"></path>
            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10"></path>
            <path d="M3.51 15a9 9 0 0 0 14.85 3.36L23 14"></path>
          </svg>
        </button>
      </div>

      <!-- Contacts List -->
      <div class="contacts-list" id="contactsList">
        <!-- Contacts will be populated here -->
      </div>

      <!-- Lead Count -->
      <div class="contacts-footer">
        <span id="leadCount" class="lead-count"></span>
      </div>
    </div>

    <!-- Favorites Tab Content -->
    <div id="favoritesTab" class="tab-content">
      <div class="placeholder-content">
        <h3>Favorites</h3>
        <p>Star your most important leads here</p>
      </div>
    </div>

    <!-- Recents Tab Content -->
    <div id="recentsTab" class="tab-content">
      <div class="placeholder-content">
        <h3>Recents</h3>
        <p>Your recent calls will appear here</p>
      </div>
    </div>

    <!-- Voicemail Tab Content -->
    <div id="voicemailTab" class="tab-content">
      <div class="placeholder-content">
        <h3>Voicemail</h3>
        <p>You have 103 new messages</p>
      </div>
    </div>

    <!-- Hover Area for Bottom Navigation -->
    <div class="bottom-hover-area">
    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <div class="nav-tab" data-tab="favorites">
        <div class="nav-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
          </svg>
        </div>
        <div class="nav-label">Favorites</div>
      </div>
      <div class="nav-tab" data-tab="recents">
        <div class="nav-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12,6 12,12 16,14"></polyline>
          </svg>
        </div>
        <div class="nav-label">Recents</div>
      </div>
      <div class="nav-tab" data-tab="contacts">
        <div class="nav-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
        <div class="nav-label">Contacts</div>
      </div>
      <div class="nav-tab active" data-tab="keypad">
        <div class="nav-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
            <line x1="8" y1="21" x2="16" y2="21"></line>
            <line x1="12" y1="17" x2="12" y2="21"></line>
          </svg>
        </div>
        <div class="nav-label">Keypad</div>
      </div>
      <div class="nav-tab" data-tab="voicemail">
        <div class="nav-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            <path d="M12 2v6"></path>
            <path d="M8 6h8"></path>
          </svg>
        </div>
        <div class="nav-label">Voicemail</div>
        <div class="nav-badge">103</div>
      </div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="settings-modal">
    <div class="settings-content">
      <div class="settings-header">
        <h3>Theme Options</h3>
        <button id="closeSettingsBtn" class="close-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <div class="settings-section compact-theme">
        <h4>Theme Options</h4>
        <div class="compact-color-controls">
          <div class="color-row">
            <label>Background:</label>
            <input type="color" id="bgColorPicker" class="color-picker">
            <input type="text" id="bgColorInput" placeholder="#000000" class="color-input">
          </div>
          <div class="color-row">
            <label>Text:</label>
            <input type="color" id="textColorPicker" class="color-picker">
            <input type="text" id="textColorInput" placeholder="#ffffff" class="color-input">
          </div>
          <div class="color-row">
            <label>Accent:</label>
            <input type="color" id="accentColorPicker" class="color-picker">
            <input type="text" id="accentColorInput" placeholder="#007bff" class="color-input">
          </div>
        </div>
      </div>
      
      <!-- Placeholder for additional settings -->
      <div class="settings-section">
        <h4>Call Settings</h4>
        <p class="placeholder-text">Call settings coming soon...</p>
      </div>
      
      <div class="settings-section">
        <h4>Audio Settings</h4>
        <div class="audio-controls">
          <!-- Microphone Input Selector -->
          <div class="audio-control-row">
            <label class="control-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                <line x1="12" y1="19" x2="12" y2="23"></line>
                <line x1="8" y1="23" x2="16" y2="23"></line>
              </svg>
              Microphone
            </label>
            <select id="micInputSelector" class="mic-input-selector">
              <option value="">Loading devices...</option>
            </select>
          </div>
          
          <!-- Input Level Meter -->
          <div class="audio-control-row">
            <label class="control-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 9H4.5a2.5 2.5 0 0 0 0 5h3a2.5 2.5 0 0 1 0 5H6"></path>
                <path d="M14 6.5a2.5 2.5 0 0 1 5 0v3a2.5 2.5 0 0 1-5 0v-3Z"></path>
                <path d="M9 2v2"></path>
                <path d="M9 20v2"></path>
                <path d="M5 4h2"></path>
                <path d="M5 18h2"></path>
                <path d="M19 4h2"></path>
                <path d="M19 18h2"></path>
                <path d="M12 2v2"></path>
                <path d="M12 20v2"></path>
              </svg>
              Input Level
            </label>
            <div class="input-level-meter">
              <div id="inputLevelBar" class="input-level-bar">
                <div class="level-fill"></div>
                <div class="level-peak"></div>
              </div>
              <span id="inputLevelText" class="level-text">0%</span>
            </div>
          </div>
          
          <!-- Input Gain Slider -->
          <div class="audio-control-row">
            <label class="control-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
              </svg>
              Mic Volume
            </label>
            <div class="gain-control">
              <input type="range" id="micGainSlider" class="gain-slider" min="0" max="100" value="50">
              <span id="gainValue" class="gain-value">50%</span>
            </div>
          </div>
          
          <!-- Mute Toggle and Test Button -->
          <div class="audio-control-row">
            <label class="control-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="9" y1="9" x2="15" y2="15"></line>
                <line x1="15" y1="9" x2="9" y2="15"></line>
              </svg>
              Controls
            </label>
            <div class="audio-buttons">
              <button id="muteToggleBtn" class="mute-toggle-btn">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                  <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                  <line x1="12" y1="19" x2="12" y2="23"></line>
                  <line x1="8" y1="23" x2="16" y2="23"></line>
                </svg>
                <span>Mute</span>
              </button>
              <button id="testMicBtn" class="test-mic-btn">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"></path>
                  <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                  <line x1="12" y1="19" x2="12" y2="23"></line>
                  <line x1="8" y1="23" x2="16" y2="23"></line>
                </svg>
                <span>Test</span>
              </button>
            </div>
          </div>
          
          <!-- Call Quality Indicator -->
          <div class="audio-control-row">
            <label>Call Quality:</label>
            <div id="callQualityIndicator" class="call-quality-indicator">
              <span class="quality-dot"></span>
              <span>Good</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="settings-section">
        <h4>General Settings</h4>
        <p class="placeholder-text">General settings coming soon...</p>
      </div>
      
      <div class="settings-actions">
        <button id="applyThemeBtn" class="apply-btn">Apply Theme</button>
        <button id="resetThemeBtn" class="reset-btn">Reset to Default</button>
      </div>
    </div>
  </div>

  <!-- Audio element for call -->
  <audio id="remoteAudio" autoplay></audio>
  


  <!-- Socket.io client library -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  
  <!-- Main Renderer -->
  <script src="renderer.js"></script>
</body>
</html> 